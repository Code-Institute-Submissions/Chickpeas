{% extends 'base.html'%}{% block css %}

{% endblock %} {% block content %}
<header class="container mt-5 pt-5">
  <h1 class="text-center pt-4">{{session.username}}'s Cookbook</h1>
  <p class="text-center">Welcome {{session.username}}, what's cooking?</p>
    <div class="row justify-content-center">
      <a href="{{url_for('add_recipe')}}" class="btn center">Add Recipe</a>
    </div>  
</header>
<main>
  <h3 class="center">My Recipes</h3>
  <div class="container-fluid">
    <div class="row">
      <button class="btn mr-1 ml-2" onclick="listView()">
        <i class="fa fa-bars"></i>
      </button>
      <button class="btn" onclick="gridView()">
        <i class="fa fa-th-large"></i>
      </button>
    </div>
     {% for cat in my_recipes %} {% if loop.index %
    2 != 0 %}
    <div class="row">
      {% endif %}
      <div class="row column featurette no-gutters shadow">
        <div class="col-md-5">
          {% if cat.recipe_pic_url %}
          <a href="{{url_for('view_recipe', recipe_id=cat._id)}}">
            <img
              class="featurette-image img-responsive"
              src="{{ cat.recipe_pic_url }}"
              alt="Picture of {{ cat.recipe_name }}"
            />
          </a>
          {% else %}
          <a href="{{url_for('view_recipe', recipe_id=cat._id)}}">
            <img
              class="featurette-image img-responsive"
              src="https://res.cloudinary.com/chickpeas/image/upload/v1591259691/chickpeas/variety-of-fruits_shgeju.jpg"
              alt="Default Pic"
            />
          </a>
          {% endif %}
        </div>
        <div class="col-md-7">
          <h3>
            <a href="{{url_for('view_recipe', recipe_id=cat._id)}}">
              {{ cat.recipe_name }}</a
            >
          </h3>
          <p>{{ cat.recipe_description }}</p>
          <div class="edit-delete-left">
            <a
              href="{{url_for('edit_recipe', recipe_id=cat._id)}}"
              class="btn edit-recipe"
              >Update</a
            >
            <a
              onclick="return confirmDelete()"
              href="{{url_for('delete_recipe', recipe_id=cat._id)}}"
              class="btn edit-recipe"
              >Delete</a
            >
          </div>          
        </div>
      </div>
      {% if loop.index % 2 == 0 or loop.index == loop.length %}
    </div>
    {% endif %} {% endfor %}
  </div>
</main>
<!-- <div class="fixed-action-btn">
  <a class="btn-floating btn-large red" href="#"> ^</a>
</div> -->
<script>
  function confirmDelete() {
    if (confirm("Do you want to delete this recipe?") == false) {
      return false;
    } else {
      return true;
    }
  }

  // Get the elements with class="column"
  var elements = document.getElementsByClassName("column");

  // Declare a loop variable
  var i;

  // List View
  function listView() {
    for (i = 0; i < elements.length; i++) {
      elements[i].style.width = "100%";
    }
  }

  // Grid View
  function gridView() {
    for (i = 0; i < elements.length; i++) {
      elements[i].style.width = "50%";
    }
  }
</script>

{% endblock %}
